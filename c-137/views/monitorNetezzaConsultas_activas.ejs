<%- include("template/header") %>
<%- include("template/navbar") %>
<%- include("template/aside")%>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">        
  <%- include('template/breadcrumb', { module: 'SESIONES', module1: ' MONITOR / NETEZZA / SESIONES' }) %>

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-sm-6 col-12">
                <div class="info-box">
                    <span class="info-box-icon bg-info"><i class="far fa-flag"></i></span>
                    <div class="info-box-content">
                        <div class="d-flex justify-content-between align-items-center">
                            <% resultsCount.forEach(function(item1, index) { %>   
                            <div class="info-box-item d-flex flex-column align-items-center <% if (index < resultsCount.length - 1) { %> pr-3 <% } %>">
                                <span class="info-box-text"><%= item1.ESTADO %></span>
                                <span class="info-box-number"><%= item1.CANTIDAD %></span>
                            </div>
                            <% }); %>  
                        </div>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
        </div>               
        <div class="row">
          <div class="col-md-12">            
            <div class="card callout callout-success card-outline ">                
                <div class="card-header">
                  <h3 class="card-title">STATUS ACTIVE</h3>
                </div>
                <div class="card-body">
                    <a href="/monitorNetezzaConsultas_activas" class="btn btn-primary mt-0 mb-1"><i class="fas fa-1x fa-sync-alt text-white"></i></a>                                   
                    <table id="example4" class="table table-striped mt-4 table-responsive">
                        <thead class="table-dark">
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">STATUS</th>  
                            <th scope="col">QSC_STATE</th>                        
                            <!-- <th scope="col">QS_STATE</th>-->
                            <th scope="col">QS_ESTCOST</th> 
                            <th scope="col">QS_ESTDISK</th>
                            <th scope="col">QS_ESTMEM</th>
                            <th scope="col">QS_SNIPPETS</th>
                            <th scope="col">CONNTIME</th>
                            <th scope="col">IPADDR</th>                                                
                            <th scope="col">OS_USERNAME</th>
                            <th scope="col">USERNAME</th>
                            <th scope="col">DBNAME</th>
                            <th scope="col">PRIORITY</th>
                            <th scope="col">COMMAND</th>
                            <th scope="col">QS_RESBYTES</th>
                            <th scope="col">QS_RESROWS</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% let count = 1; %> <!-- Definir la variable count aquí -->
                          <% resultsActive.forEach(function(user) { %>                             
                            <tr>
                              <td><%= count++ %></td>   <!-- Incrementar la variable count manualmente -->
                              <td><%= user.STATUS %></td> 
                              <td><%= user.QSC_STATE %></td>                                              
                              <!-- <td><%= user.QS_STATE %></td>-->
                              <td><%= user.QS_ESTCOST %></td>   
                              <td><%= user.QS_ESTDISK %></td>
                              <td><%= user.QS_ESTMEM %></td>   
                              <td><%= user.QS_SNIPPETS %></td>   
                              <td><%= user.CONNTIME %></td>   
                              <td><%= user.IPADDR %></td>   
                              <td><%= user.CLIENT_OS_USERNAME %></td> 
                              <td><%= user.USERNAME %></td> 
                              <td><%= user.DBNAME %></td> 
                              <td><%= user.PRIORITY %></td> 
                              <td><%= user.COMMAND %></td>
                              <td><%= user.QS_RESBYTES %></td> 
                              <td><%= user.QS_RESROWS %></td>                                           
                            </tr> 
                          <% }); %>             
                        </tbody>
                    </table>                                  
                </div><!-- /.card-body -->
            </div>                                       
          </div>    
        </div>
        <div class="row">
            <div class="col-md-12">            
              <div class="card callout callout-warning card-outline ">                
                  <div class="card-header">
                    <h3 class="card-title">STATUS IDLE</h3>
                  </div>
                  <div class="card-body">
                      <a href="/monitorNetezzaConsultas_activas" class="btn btn-primary mt-0 mb-1"><i class="fas fa-1x fa-sync-alt text-white"></i></a>                                   
                      <table id="example5" class="table table-striped mt-4 table-responsive">
                          <thead class="table-dark">
                            <tr>
                              <th scope="col">#</th>
                              <th scope="col">STATUS</th>                                
                              <th scope="col">CONNTIME</th>
                              <th scope="col">IPADDR</th>                                                
                              <th scope="col">OS_USERNAME</th>
                              <th scope="col">USERNAME</th>
                              <th scope="col">DBNAME</th>
                              <th scope="col">PRIORITY</th>
                              <th scope="col">COMMAND</th>                              
                            </tr>
                          </thead>
                          <tbody>  
                            <% let count1 = 1; %> <!-- Definir la variable count aquí -->                          
                            <% resultsIdle.forEach(function(item) { %>   
                              <tr>
                                <td><%= count1++ %></td>   <!-- Incrementar la variable count manualmente -->
                                <td><%= item.STATUS %></td>  
                                <td><%= item.CONNTIME %></td>   
                                <td><%= item.IPADDR %></td>   
                                <td><%= item.CLIENT_OS_USERNAME %></td> 
                                <td><%= item.USERNAME %></td> 
                                <td><%= item.DBNAME %></td> 
                                <td><%= item.PRIORITY %></td> 
                                <td><%= item.COMMAND %></td>                                                       
                              </tr> 
                            <% }); %>            
                          </tbody>
                      </table>                                  
                  </div><!-- /.card-body -->
              </div>                                       
            </div>    
        </div>                      
    </div><!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<%- include("template/footer") %>
